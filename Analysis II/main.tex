\documentclass{article}
\usepackage{../header}
\title{Analysis II}
\author{Notes made by Finley Cooper}
\newcommand{\eps}{\varepsilon}
\begin{document}
  \maketitle
  \newpage
  \tableofcontents
  \newpage
  \section{Uniform Convergence}
For a subset $ E\subseteq \R $, have a sequence $ f_n:E\to \R $. What does it mean for the sequence $ (f_n) $ to converge? The most basic notion for any $ x \in E $ require that the sequence of real numbers $ f_n(x) $ to converge in $ \R $. If this holds we can defined a new function $ f: E\to \R $ by setting each value to the limit of the function.
\begin{definition}
	(Pointwise limit) We say that $ (f_n) $ converges \textit{pointwise} if for all $ x $ in its domain we have that
	\[
		f(x)=\lim_{n\to\infty}f_n(x)
	\]
	converges. We write that $ f_n\to f $ pointwise.
\end{definition}
Are properties such as continuity, differentiability integrability, preserved in the limit? We'll use an example to show that continuity is not preserved.\par
We can see this by taking a sequence of functions which converge to a step function by taking tighter and tighter curvers which get steeper and steeper. For example take,
\[
	f_n:[-1,1]\to \R,\quad f_n(x)=x^{\frac 1{2n+1}}.
\]
So in the limit we get that
\[
  f_n(x)\to f(x)=\begin{cases}
	  1 & 0< x \le 1 \\
	  0 & x = 0 \\
	  -1 & -1\le x < 0 
  \end{cases}
\]
which is not continious.\par
For an example where integability is not preserved, let $ q_1,q_2,q_3,\dots $ be an enumeration of $ \Q\cap [0,1] $ and define
\[
  f_n(x)=\begin{cases}
	  1 & x\in\{q_1,\dots, q_n\} \\
	  0 & \text{otherwise}
  \end{cases}
\]
so we get $ f_n(x) $ continious everywhere on $ [0,1] $ apart from a finite number of points, then $ f_n $ is integrable on $ [0,1] $ (IA Analysis I). But,
\[
	\lim_{n\to\infty}f_n(x)=\boldsymbol{1}_\Q(x)
\]
which we know is not integrable.\par
If $ f_n\to f $ pointwise, $ f_n $ integrable, $ f $ integrable, does it follow that $ \int f_n\to\int f $? (Spoiler: No)
For example take $ f_n $ to be a 'spike' with height $ n $ and width $ \frac 2n $, concretely,
\[
  f_n(x)=\begin{cases}
	  n^2x& 0\le x \le \frac 1n \\
	  n^2(\frac 2n - x) & \frac 1n \le x \le \frac 2n \\
	  0 & \text{otherwise}
  \end{cases}
\]
So the integral of $ f_n $ over $ [0,1] $ is $ 1 $, but we can see that $ f_n $ converges pointwise to zero. So $ \int_0 ^1 f_n\to 1 $ but $ \int_0 ^1f\to0 $.\par So we need a better (stronger) notion for the convergence of a sequence of functions.
We can't use something too strong, such as $ f_n \to f$ if $ f_n $ is eventually $ f $ for large enough $ n $. We've got to find something inbetween. This is uniform convergence.
\begin{definition}
	(Uniform convergence) Let $ f_n,f: E\to \R $, for $ n\in\N $. We say that $ (f_n) $ converges \textit{uniformly} on $ E $ if the following holds. For all $ \eps>0 $, $ \exists N=N(\eps) $ such that for every $ n\ge N $ and for every $ x\in E $ we have that $ |f_n(x)-f(x)|<\eps $.
\end{definition}
\begin{remark}
  This statement is equivalent to the following,
  \[
	  \forall\eps >0,\exists N=N(\eps), \text{ s.t. } \forall n\ge N, \sup_{x\in E}|f_n(x)-f(x)|<\eps.
  \]
\end{remark}
Comparing this to pointwise convergence, $ \forall x \in E $ and $ \forall \eps>0 $, $ \exists N=N(\eps,x) $ such that $ n\ge N\implies |f_n(x)-f(x)|<\eps $. So we can change our $ N $ value for each individual $ x $. However we can't in uniform convergence, which makes this is stronger statement.\par
Hence we see Uniform convergence $ \implies $ Pointwise convergence.
This gives a nice way to compute uniform limits. If a function doesn't converge pointwise then we know it doesn't converge uniformly. If we know a sequence of functions converges pointwise to some limit function, then this function must be the limit of the uniform limit, if it exists.
\begin{definition}
	(Uniformly Cauchy) Let $ f_n:E\to \R $ be a sequence of functions. We say that $ (f_n) $ is \textit{uniformly Cauchy} on $ E $ if
	\[
		\forall \eps >0, \exists N=N(\eps) \st n,m\ge N\implies \sup_{x\in E}|f_n(x)-f_m(x)|<\eps.
	\]
\end{definition}
\begin{theorem}
	(Cauchy criterion for uniform convergence) Let $ (f_n) $ be a sequence of functions with $ f_n:E\to \R $. The $ (f_n) $ converges uniformly on $ E $ if and only if $ (f_n) $ is uniformly Cauchy on $ E $.
\end{theorem}
\pf Suppose that $ (f_n) $ is a sequence converging uniformly in $ E $ to some function $ f $. Given some $ \eps>0 $, there is a $ N $ such that $ \sup_{x\in E}|f_n(x)-f(x)|<\eps $ for all $ n\ge N $. By the triangle inequality $ \forall x\in E $, picking $ n,m\ge N $,
\begin{align*}
	|f_n(x)-f_m(x) & |\le |f_n(x)-f(x)|+|f_m(x)-f(x)| \\
 & \le \sup_E|f_n-f|+\sup_E|f_m-f| \\
 & < \eps + \eps\\
 & < 2\eps
\end{align*}
hence $ (f_n) $ is uniformly Cauchy.\\
For the converse, suppose that $ (f_n) $ is a sequence uniformly Cauchy in $ E $. Then the sequence of real numbers $ (f_n(x)) $ is Cauchy so by IA Analysis I, this sequence has a limit, call it $ f(x) $. So $ (f_n) $ converges pointwise to $ f $. Now we check that $ f_n\to f $ uniformly on $ E $. Pick any $ \eps >0 $ and note that by the hypothesis that $ (f_n) $ is uniformly Cauchy, there exists a number $ N $ such that for all $ n,m\ge N $ we have $ |f_n(x)-f_m(x)|<\eps $. Fix $ n\ge N $ and let $ m\to\infty $ in this. So since $ f_m(x) $ converges to $ f(x) $ pointwise, we get that
\[
  |f_n(x)-f(x)|\le \eps
\]
hence $ (f_n) $ converges uniformly in $ E $.\qed\par
For an example consider $ f_n:\R\to\R $ defined by $ f_n(x)=\frac x n $. So $ f_n\to 0 $ pointwise on $ \R $. But $ |f_n-0| $ is unbounded so the suprenum doesn't exist so $ f_n $ does not converge uniformly on $ \R $. However if we restrict the domain of $ f_n $ to $ [-a,a] $ then we get uniform convergence.
\begin{theorem}
	(Continuity is preserved under uniform limits) Let $ f_n,f:[a, b]\to \R $. Suppose that $ (f_n) $ converges to $ f $ uniformly on $ [a,b] $. If $ x\in [a,b] $ is such that $ f_n $ is continuous at $ x $ for all $ n\in \N $, then $ f $ is continuous at $ x $.
\end{theorem}
\pf Let $ \eps>0 $ by uniform convergence of $ f_n\to f $ we have some $ N\in \N $ such that for all $ n\ge N $,
\[
	\sup_{y\in[a,b]}|f_n(y)-f(y)|<\eps
\].
By continuity of $ f_N $ at $ x $ we have $ \delta=\delta(N,x,\eps)>0 \st y\in[a,b], |x-y|<\delta\implies |f_N(y)-f_N(x)|<\eps $.\\
Then $ y\in[a,b], |x-y|<\delta $ we ] have
\begin{align*}
	|f(y)-f(x)| & \le |f(y)-f_N(y)|+|f_N(y)-f_N(x)|+|f_N(x)-f(x)|\\
         & < \eps + \eps +\eps\\
	 & < 3\eps
\end{align*}
Hence $ f $ is continuous at $ x $. \qed\par
It is instructive to see where this proof goes wrong if we only assume that $ (f_n) $ converges to $ f $ pointwise.
\begin{corollary}
	(Uniform limits of continuous functions are continuous) If $ f_n,f:[a,b]\to \R $, and $ f_n\to f $ uniformly on $ [a,b] $ and if $ f_n $ is continuous on $ [a,b] $ for every $ n $ then $ f $ is continuous on $ [a,b] $.
\end{corollary}
\pf Immediate from the previous theorem.\qed\par
From now on we will denote $ C([a,b]) = \{f:[a,b]\to \R:f\text{ is continuous on } [a,b]\}. $
\begin{theorem}
	Let $ (f_n) $ be a uniformly Cauchy sequence of functions in $ C([a,b]) $ the it converges to a function in $ C([a,b]) $.
\end{theorem}
\pf Trivial from our theorems earlier proved. \qed
\begin{theorem}
	(Uniform convergence implies convergence of integrals) For $ f_n,f:[a,b]\to \R $ be such that $ f_n,f $ are bounded and integrable on $ [a,b] $. If $ f_n\to f $ uniformly on $ [a,b] $ then
	\[
	  \int_a^bf_n(x)\mathrm dx\to \int_a^bf(x)\mathrm dx
	\]
\end{theorem}
\begin{remark}
  The assumption that $ f $ is integrable is redundant. We will see later that integrability of $ f_n $ implies that $ f $ is integrable if $ f_n\to f $ uniformly
\end{remark}
\pf
\begin{align*}
	\left|\int_a^bf_n(x)\mathrm dx-\int_a^bf(x)\mathrm dx|&=\left|\int_a^bf_n(x)-f(x)\mathrm dx \\
							      &\le \int_a^b |f_n(x)-f(x)|\mathrm dx \\
							      &\le \sup_{x\in [a,b]}|f_n(x)-f(x)|(b-a) \to 0
\end{align*}
by assumption.
\subsection{Differentation and uniform convergence}
This is more subtle if $ f_n\to f $ uniformly on some interval and if $ f_n $ are differentiable it does not follow that
\begin{enumerate}
	\item That $ f $ is differentiable.
	\item Even if $ f $ is differentiable that $ f_n'(x)\to f(x) $.
\end{enumerate}
We can view this in the example of $ f_n:[-1,1]\to \R $ with $ f_n(x)=|x|^{1+\frac 1n} $. Hence we have that 
\[
	\lim_{x\to 0}\frac{f_n(x)-f_n(0)}{x}=\lim_{x\to 0}\mathrm{sgn}(x^{\frac 1n})=0
\]
So $ f_n $ is differentialbe at $ 0 $ with $ f_n(0)=0 $ and clearly $ f_n $ is differentiable everywhere where $ x=0 $ too. We can check that $ f_n\to |x| $ uniformly. But $ |x| $ is not differentiable at $ x=0 $.\par
Now consider the example $ f_n:\R\to\R $ with
\[
	f_n(x)=\frac{\sin(nx)}{\sqrt n}.
\]
So $ f_n\to 0 $ uniformly on $ \R $. So we have a differentiable limit but $ f_n'(x)=\sqrt n \cos(nx) $ which is not convergent as $ n\to\infty $. So we don't have $ f_n'(x)\to f'(x) $ pointwise on $ \R $.
\begin{theorem}
	Let $ f_n:[a,b]\to \R $ be a sequence of differentiable functions (at the end points this means that the one-sided derivative exists). Suppose that:
	\smallskip\begin{enumerate}
		\item $ f_n'\to g $ uniformly for some function $ g:[a,b]\to \R $.
		\item For some $ c\in[a,b] $ the sequence $ (f_n(c)) $ converges.
	\end{enumerate}\smallskip
	Then $ (f_n) $ converges uniformly to some function $ f:[a,b]\to \R $ where $ f $ is differentiable everywhere on $ [a,b] $ and $ f'(x)=g(x) $ for all $ x\in[a,b] $.
\end{theorem}
This proves that
\[
	\left(\lim_{n\to \infty}f_n\right)'=\lim_{n\to\infty}f'_n
\]
i.e. we can exchange the derivative and limit in this case.
\begin{remark}
If we assume that $ f'_n $ are continuous, then the proof is more straightforward and can be based on the fundamental theorem of calculus. 
\end{remark}
\pf By the mean value theorem applied to the difference $ (f_n-f_m) $ we have that for any $ x\in[a,b] $
\begin{align*}
	f_n(x)-f_m(x)&=f_n(c)-f_m(c)+(x-c)(f_n-f_m)'(x_{n,m}) \\
	\implies |f_n(x)-f_m(x)|&\le |f_n(c)-f_m(c)|+(b-a)|f_n'(x_{n,m})-f_m'(x_{n,m})|\\
	\implies \sup|f_n-f_m|&<|f_n(c)-f_m(c)|+(b-a)\sup|f_n'-f_m'|\to 0
\end{align*}
as $ n\to\infty $. So $ (f_n) $ is uniformly Cauchy and hence there is an $ f : [a,b]\to \R \st f_n\to f$ uniformly.\par
For the next part fix some $ y\in [a,b] $. Define
\[
  h(x)=\begin{cases}
	  \frac{f(x)-f(y)}{x-y} & x\ne y \\
	  g(y) & x=y
  \end{cases}
\]
Now we only have to estabilish that $ h $ is continuous at $ y $ to show that $ f $ is differentiable at $ y $ with $ f'(y)=g(y) $. Let
\[
  h_n(x)=\begin{cases}
	  \frac{f_n(x)-f_n(y)}{x-y} & x\ne y\\
	  f_n'(y) & x = y 
  \end{cases}
\]
then since $ f_n $ is differentiable at $ y $ we see that $ h_n $ is continuous on $ [a,b] $. The pointwise limit of $ (h_n) $ is $ h $ almost by definition since $ f'_n\to g $ at $ x=y $. Since the uniform limit of sequence of continuous functions is continuous, we just need to show that $ (h_n) $ is uniformly Cauchy on $ [a,b] $ since the limit must be $ h $ since it converges pointwise to $ h $.
\begin{align*}
  h_n(x)-h_m(x)=\begin{cases}
	  \frac{(f_n-f_m)(x)-(f_n-f_m)(y)}{x-y} & x\ne y \\
	  (f_n'-f_m')(y) & x=y
  \end{cases}.
\end{align*}
By the mean value theorem,
\begin{align*}
	h_n(x)-h_m(x)&=\begin{cases}
	  (f_n-f_m)'(x_{n,m}) \text{ for some } x_{n,m} \text{ between } x \text{ and } y & x\ne y\\
	  (f_n-f_m)'(y) & x=y
  \end{cases}\\
		\sup_{[a,b]}|h_n-h_m|&\le \sup_{[a,b]}|f_n'-f_m'|\to 0
\end{align*}
as $ n,m\to \infty $. So $ (h_n) $ is uniformly Cauchy so we're done. \qed
\begin{remark}
  $ f_n' $ need not be continuous consider
  \[
    f(x)=\begin{cases}
	    x^2\sin \frac 1x & x\ne 0 \\
	    0 & x = 0
    \end{cases}
  \]
  the $ f $ is differentiable on $ [-1,1] $ with f'(x) not continuous at $ x=0 $ and we can take $ f_n(x)=f(x) $ for all $ n $ (or $ f_n(x)=f(x)+\frac xn $.
\end{remark}
We have a shorter proof of the above theorem, assuming that $ (f_n') $ are continuous in addition to the hypothesis. For any $ x\in [a,b] $ we can write
\begin{align*}
  f_n(x)=f_n(c)+\int_c^xf_n'(t)\mathrm dt
\end{align*}
by FTC. Then
\begin{align*}
	|f_n(x)-f_m(x)|&=\left|f_n(c)-f_m(c)+\int_c^x(f_n'(c)-f_m'(c))\mathrm dt\right|\\
		       &\le |f_n(c)-f_m(c)|+\sup_{t\in[a,b]}|f_n'(t)-f_m'(t)|(b-a)\to 0
\end{align*} as $ n,m\to\infty $. So $ (f_n) $ is uniformly Cauchy, hence converges uniformly.\par
Note that 
\[
	\int_c^xf_n'(t)\mathrm dt\to \int_c^xg(t)\mathrm dt
\]
by uniform convergence of $ f_n'\to g $ which implies $ g $ is continuous and hence also integrable. We can let $ n\to\infty $ the first equation for $ f_n(x) $ which gives that
\[
  f(x)=f(c)+\int_c^xg(x)\mathrm dt
\]
So we can take the derivative of both sides giving that $ f'(x)=g(x)=\lim f_n'(x) $.\qed
\begin{proposition}
  If $ f_n,g_n:E\to \R $ with $ f_n\to f $ uniformly on $ E $ and $ g_n\to g $ uniformly on $ E $ then $ f_n+g_n $ converges uniformly to $ f+g $ on $ E $, and if $ h:E\to \R $ is a bounded function then $ hf_n\to hf $ uniformly on $ E $ also.
\end{proposition}
\pf On the example sheet.
\section{Series of functions}
\begin{definition}
	(Convergence of a series of functions) Let $ g_n: E\to \R $ for $ n\in\N $ then write
  \[
	  f_n=\sum_{j=1}^ng_j
  \]
  defined pointwise. Then we say that that,
  \begin{enumerate}
	  \item The series of functions $ \sum_{n=1}^\infty g_n $ is convergent at a point $ x\in E $ if the sequence of partial sums $ (f_n(x)) $ converges.
	  \item The series of functions $ \sum_{n=1}^\infty g_n $ uniformly on $ E $ if the sequence $ (f_n) $ converges uniformly on $ E $.
	  \item $ \sum_{n=1}^\infty g_n $ converges absolutely at $ x\in E $ if the series $ \sum_{n=1}^\infty |g_n(x)| $ converges.
	  \item $ \sum_{n=1}^\infty g_n $ converges absolutely uniformly on $ E $ if $ \sum_{n=1}^\infty |g_n| $ converges uniformly on $ E $.
  \end{enumerate}
\end{definition}
We know from IA Analysis I that absolutely convergence $ \implies $ convergence for a sequences in $ \R $. From this we have that if $ \sum_{n=1}^\infty  g_n $ converges absolutely at a point $ x\in E $ then $ \sum_{n=1}^\infty g_n $ converges at $ x $. Similiar to this we have the following proposition relating absolute uniform convergence and uniform convergence.
\begin{proposition}
	(Absolute uniform convergence implies uniform convergence) If $ g_n:E\to \R $ and if $ \sum_{n=1}^\infty g_n $ converges absolutely uniformly on $ E $ then $ \sum_{n=1}^\infty g_n$ converges uniformly on $ E $.
\end{proposition}
\pf Let $ f_n=\sum_{i=1}^n g_i $ Then
\begin{align*}
	|f_n(x)-f_m(x)|&=\left|\sum_{i=m+1}^ng(i)\right|\\
		       &= \sum_{i=m+1}^n|g_i(x)|=h_n(x)-h_m(x),\quad\text{where } h_n(x)=\sum_{i=1}^n|g_i(x)|\\
	\sup_{x\in E}|f_n(x)-f_m(x)|&\le \sup_{x\in E}|h_n(x)-h_m(x)|\to 0
\end{align*}
as $ n,m\to \infty $ so $ (f_n) $ converges uniformly on $ E $.\qed
\begin{remark}
  Uniform convergence and absolute pointwise convergence aren't enough to conclude that the series convergence absolutely uniformly.
\end{remark}
\end{document}
